{% load agent_extras %}

{% include "console/partials/_agent_timeline_items.html" with events=timeline_window.events %}

<div id="timeline-cursors" hx-swap-oob="true"
     data-older="{{ timeline_window.window_oldest_cursor|default:'' }}"
     data-newer="{{ current_newest_cursor|default:'' }}"
     data-has-more-older="{{ timeline_window.has_more_older|yesno:'true,false' }}"
     data-has-more-newer="{{ timeline_window.has_more_newer|yesno:'true,false' }}"></div>

<div id="timeline-load-older" hx-swap-oob="true" class="flex justify-center border-b border-slate-100 py-2 text-xs text-slate-500">
  {% if timeline_window.has_more_older %}
    <button
      class="inline-flex items-center gap-2 rounded border border-slate-300 px-3 py-1.5 text-xs font-medium text-slate-600 hover:bg-slate-100"
      hx-get="{{ timeline_older_url }}{% if timeline_window.window_oldest_cursor %}&cursor={{ timeline_window.window_oldest_cursor|urlencode }}{% endif %}&limit={{ timeline_limit }}&current_newest={{ current_newest_cursor|default:''|urlencode }}"
      hx-target="#timeline-events"
      hx-swap="afterbegin">
      Load older
    </button>
  {% else %}
    <span>Beginning of history</span>
  {% endif %}
</div>

<button id="jump-to-latest" hx-swap-oob="true"
        class="hidden absolute bottom-4 left-1/2 z-20 -translate-x-1/2 rounded border border-indigo-200 bg-white px-3 py-1 text-xs font-semibold text-indigo-600 shadow"
        type="button">
  Jump to latest
</button>
